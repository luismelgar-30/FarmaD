<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block page_title %}Dashboard{% endblock %} - FarmaD</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='admin_dashboard.css') }}">
    {% block additional_css %}{% endblock %}
    <link rel="stylesheet" href="{{ url_for('static', filename='config.css') }}">

</head>
<body>

<div class="dashboard-layout">

    
    <aside class="sidebar">
        <h2>Farmacia Melgar</h2>

        <div class="sidebar-buttons">
            <a href="{{ url_for('logout') }}" class="sidebar-btn logout-btn">Salir</a>
        </div>

        <nav class="sidebar-nav">
            
            {% if user_rol == 'administrador' %}
    <a href="{{ url_for('roles_bp.roles_list') }}" class="sidebar-nav-item">Roles</a>
{% endif %}

            
            <a href="{{ url_for('creditos') }}" class="sidebar-nav-item">Créditos/Información</a>
            <a href="#" id="btn-config" class="sidebar-nav-item">Configuración</a>
            <a href="{{ url_for('manual') }}" class="sidebar-nav-item">Manual</a>
        </nav>
    </aside>

    
    <main class="main-content">
        <div class="header-bar">
            <h1 class="header-title">{% block title %}Dashboard Principal{% endblock %}</h1>
            <div class="header-buttons">
                <a href="{{ url_for('creditos') }}" class="btn">Créditos/Información</a>
                <a href="{{ url_for('manual') }}" class="btn">Manual</a>
            </div>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

</div>

<div id="config-modal" class="config-modal">
    <div class="config-content">
        <span id="close-config" class="close-btn">&times;</span>
        <h2>Configuración</h2>

        <div class="config-option">
            <label for="theme-select">Tema:</label>
            <select id="theme-select">
                <option value="light">Claro</option>
                <option value="dark">Oscuro</option>
            </select>
        </div>

        <div class="config-option">
            <label for="btn-color">Color de botones:</label>
            <input type="color" id="btn-color" value="#2980B9">
        </div>

        <button id="apply-config">Aplicar cambios</button>
    </div>
</div>
<script>
const btnConfig = document.getElementById('btn-config');
const modal = document.getElementById('config-modal');
const closeBtn = document.getElementById('close-config');
const themeSelect = document.getElementById('theme-select');
const btnColor = document.getElementById('btn-color');
const applyBtn = document.getElementById('apply-config');

btnConfig.addEventListener('click', () => {
    modal.style.display = 'flex';
});

closeBtn.addEventListener('click', () => {
    modal.style.display = 'none';
});

window.addEventListener('click', (e) => {
    if (e.target == modal) modal.style.display = 'none';
});

applyBtn.addEventListener('click', () => {
    
    if (themeSelect.value === 'dark') {
        document.body.classList.add('dark-mode');
    } else {
        document.body.classList.remove('dark-mode');
    }

    
    const buttons = document.querySelectorAll('.btn, .sidebar-nav-item');
    buttons.forEach(b => b.style.backgroundColor = btnColor.value);

    modal.style.display = 'none';
});
</script>

</body>
</html>
